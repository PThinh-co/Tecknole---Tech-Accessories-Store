<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QU·∫¢N TR·ªä WEB - Tecknole Admin</title>
    <style>
        /* CSS cho Admin Dashboard */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f7f6; min-height: 100vh; }
        
        /* Login Page */
        .login-container { 
            display: flex; justify-content: center; align-items: center; min-height: 100vh; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
        }
        .login-box { 
            background: white; padding: 40px; border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); 
            width: 100%; max-width: 400px; 
        }
        .login-box h2 { text-align: center; color: #667eea; margin-bottom: 30px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: 500; }
        .form-group input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; }
        .btn-login { 
            width: 100%; padding: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; border: none; border-radius: 5px; cursor: pointer; 
        }
        
        /* Admin Dashboard Layout */
        .admin-container { 
            display: none; 
            min-height: 100vh; 
            display: grid; 
            grid-template-columns: 250px 1fr; 
            background: #f4f7f6;
        }
        .sidebar { 
            background: #2c3e50; padding: 20px 0; height: 100vh; position: fixed; 
            width: 250px; overflow-y: auto; 
        }
        .sidebar-header { padding: 0 20px 20px; border-bottom: 1px solid #34495e; color: white; }
        .menu-item { padding: 15px 20px; color: #ecf0f1; cursor: pointer; transition: background 0.3s; display: flex; align-items: center; }
        .menu-item:hover, .menu-item.active { background: #34495e; }
        .main-content { margin-left: 250px; padding: 20px; }
        .top-bar { 
            background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; 
        }
        .btn-logout { padding: 10px 20px; background: #e74c3c; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .content-area { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .section { display: none; }
        .section.active { display: block; }
        
        /* Table & Forms */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table th, table td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        table th { background: #667eea; color: white; }
        .btn { padding: 8px 16px; margin: 2px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; }
        .btn-primary { background: #3498db; color: white; }
        .btn-success { background: #2ecc71; color: white; }
        .btn-danger { background: #e74c3c; color: white; }
        .btn-warning { background: #f39c12; color: white; }
        .btn-add { background: #667eea; color: white; padding: 12px 24px; margin-bottom: 20px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center; }
        .modal.active { display: flex; } /* Th√™m display: flex */
        .modal-content { background: white; padding: 30px; border-radius: 10px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 10px; }
        .stat-value { font-size: 32px; font-weight: bold; }
        .search-bar { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .form-control { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-size: 14px; }
        .badge { padding: 5px 10px; border-radius: 5px; font-size: 12px; font-weight: 600; }
        .badge-active { background: #d4edda; color: #155724; }
        .badge-locked { background: #f8d7da; color: #721c24; }
        .badge-new { background: #fff3cd; color: #856404; }
        .badge-completed { background: #d4edda; color: #155724; }
        .badge-pending { background: #d1ecf1; color: #0c5460; }
        .alert-warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
    </style>
</head>
<body>
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <h2>üîê ƒêƒÇNG NH·∫¨P QU·∫¢N TR·ªä</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label>T√™n ƒëƒÉng nh·∫≠p</label>
                    <input type="text" id="username" required placeholder="T√†i kho·∫£n: quanly1">
                </div>
                <div class="form-group">
                    <label>M·∫≠t kh·∫©u</label>
                    <input type="password" id="password" required placeholder="M·∫≠t kh·∫©u: abcd1234">
                </div>
                <button type="submit" class="btn-login">ƒêƒÉng nh·∫≠p</button>
            </form>
        </div>
    </div>

    <div class="admin-container" id="adminPage">
        <div class="sidebar">
            <div class="sidebar-header">
                <h3>‚öôÔ∏è QU·∫¢N TR·ªä WEB</h3>
                <div class="admin-info" id="adminName">Admin</div> 
            </div>
            <div class="menu-item active" data-section="dashboard"><span>üìä</span> T·ªïng quan</div>
            <div class="menu-item" data-section="users"><span>üë•</span> Qu·∫£n l√Ω ng∆∞·ªùi d√πng</div>
            <div class="menu-item" data-section="categories"><span>üìÅ</span> Qu·∫£n l√Ω danh m·ª•c</div>
            <div class="menu-item" data-section="products"><span>üì¶</span> Qu·∫£n l√Ω s·∫£n ph·∫©m</div>
            <div class="menu-item" data-section="imports"><span>üì•</span> Qu·∫£n l√Ω nh·∫≠p h√†ng</div>
            <div class="menu-item" data-section="pricing"><span>üí∞</span> Qu·∫£n l√Ω gi√° b√°n</div>
            <div class="menu-item" data-section="orders"><span>üõí</span> Qu·∫£n l√Ω ƒë∆°n h√†ng</div>
            <div class="menu-item" data-section="inventory"><span>üìà</span> Th·ªëng k√™ t·ªìn kho</div>
        </div>

        <div class="main-content">
            <div class="top-bar">
                <h2 id="pageTitle">T·ªïng quan</h2>
                <button class="btn-logout" onclick="logout()">ƒêƒÉng xu·∫•t</button>
            </div>

            <div class="content-area">
                <div class="section active" id="dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>T·ªïng kh√°ch h√†ng</h4>
                            <div class="stat-value" id="totalUsers">0</div>
                        </div>
                        <div class="stat-card">
                            <h4>T·ªïng s·∫£n ph·∫©m</h4>
                            <div class="stat-value" id="totalProducts">0</div>
                        </div>
                        <div class="stat-card">
                            <h4>ƒê∆°n h√†ng m·ªõi (Ch∆∞a x·ª≠ l√Ω)</h4>
                            <div class="stat-value" id="newOrders">0</div>
                        </div>
                        <div class="stat-card">
                            <h4>C·∫£nh b√°o t·ªìn kho (< 10)</h4>
                            <div class="stat-value" id="lowStock">0</div>
                        </div>
                    </div>
                </div>

                <div class="section" id="users">
                    <h3>Qu·∫£n l√Ω ng∆∞·ªùi d√πng (th√™m, kh·ªüi t·∫°o m·∫≠t kh·∫©u, kho√° t√†i kho·∫£n)</h3>
                    <table id="usersTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>T√™n kh√°ch h√†ng</th>
                                <th>T√†i kho·∫£n</th>
                                <th>Email</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody"></tbody>
                    </table>
                </div>

                <div class="section" id="categories">
                    <h3>Qu·∫£n l√Ω danh m·ª•c s·∫£n ph·∫©m (th√™m, s·ª≠a, ·∫©n)</h3>
                    <button class="btn btn-add" onclick="openCategoryModal()">‚ûï Th√™m lo·∫°i s·∫£n ph·∫©m</button>
                    <table id="categoriesTable">
                        <thead>
                            <tr>
                                <th>M√£ lo·∫°i</th>
                                <th>T√™n lo·∫°i</th>
                                <th>% L·ª£i nhu·∫≠n M·∫∑c ƒë·ªãnh</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="categoriesTableBody"></tbody>
                    </table>
                </div>

                <div class="section" id="products">
                    <h3>Qu·∫£n l√Ω s·∫£n ph·∫©m (th√™m, s·ª≠a, s·ª≠a hi·ªán tr·∫°ng)</h3>
                    <button class="btn btn-add" onclick="openProductModal()">‚ûï Th√™m s·∫£n ph·∫©m</button>
                    <table id="productsTable">
                        <thead>
                            <tr>
                                <th>M√£ SP</th>
                                <th>T√™n s·∫£n ph·∫©m</th>
                                <th>Lo·∫°i</th>
                                <th>Gi√° b√°n</th>
                                <th>T·ªìn kho</th>
                                <th>Hi·ªán tr·∫°ng</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody"></tbody>
                    </table>
                </div>

                <div class="section" id="imports">
                    <h3>Qu·∫£n l√Ω nh·∫≠p h√†ng, l·∫≠p phi·∫øu nh·∫≠p h√†ng</h3>
                    <button class="btn btn-add" onclick="openImportModal()">‚ûï T·∫°o phi·∫øu nh·∫≠p</button>
                    <table id="importsTable">
                        <thead>
                            <tr>
                                <th>M√£ phi·∫øu</th>
                                <th>Ng√†y nh·∫≠p</th>
                                <th>T·ªïng ti·ªÅn</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="importsTableBody"></tbody>
                    </table>
                </div>

                <div class="section" id="pricing">
                    <h3>Qu·∫£n l√Ω gi√° b√°n v√† % l·ª£i nhu·∫≠n</h3>
                    <table id="pricingTable">
                        <thead>
                            <tr>
                                <th>M√£ SP</th>
                                <th>T√™n s·∫£n ph·∫©m</th>
                                <th>Gi√° v·ªën</th>
                                <th>% L·ª£i nhu·∫≠n</th>
                                <th>Gi√° b√°n (ƒê·ªÅ xu·∫•t)</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="pricingTableBody"></tbody>
                    </table>
                </div>

                <div class="section" id="orders">
                    <h3>Qu·∫£n l√Ω ƒë∆°n ƒë·∫∑t h√†ng c·ªßa kh√°ch</h3>
                    <div class="search-bar">
                        <input type="date" id="orderDateFrom">
                        <input type="date" id="orderDateTo">
                        <select id="filterOrderStatus">
                            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="Ch∆∞a x·ª≠ l√Ω">Ch∆∞a x·ª≠ l√Ω (M·ªõi ƒë·∫∑t)</option>
                            <option value="ƒê√£ x√°c nh·∫≠n">ƒê√£ x√°c nh·∫≠n</option>
                            <option value="ƒê√£ giao th√†nh c√¥ng">ƒê√£ giao th√†nh c√¥ng</option>
                            <option value="ƒê√£ h·ªßy">ƒê√£ h·ªßy</option>
                        </select>
                        <select id="sortOrderWard">
                            <option value="">S·∫Øp x·∫øp theo Ph∆∞·ªùng</option>
                        </select>
                        <button class="btn btn-primary" onclick="loadOrders()">T√¨m & L·ªçc</button>
                    </div>
                    <table id="ordersTable">
                        <thead>
                            <tr>
                                <th>M√£ ƒêH</th>
                                <th>Kh√°ch h√†ng</th>
                                <th>Ng√†y ƒë·∫∑t</th>
                                <th>T·ªïng ti·ªÅn</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>ƒê·ªãa ch·ªâ giao h√†ng (Ph∆∞·ªùng)</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody"></tbody>
                    </table>
                </div>

                <div class="section" id="inventory">
                    <h3>Qu·∫£n l√Ω t·ªìn kho v√† Th·ªëng k√™ b√°o c√°o</h3>
                    <div class="alert alert-warning" id="lowStockAlert" style="display:none;">
                        ‚ö†Ô∏è C√≥ <strong id="lowStockCount">0</strong> s·∫£n ph·∫©m s·∫Øp h·∫øt h√†ng (< 10 s·∫£n ph·∫©m)
                    </div>
                    <table id="inventoryTable">
                        <thead>
                            <tr>
                                <th>M√£ SP</th>
                                <th>T√™n s·∫£n ph·∫©m</th>
                                <th>Lo·∫°i</th>
                                <th>T·ªïng nh·∫≠p</th>
                                <th>ƒê√£ b√°n</th>
                                <th>T·ªìn kho hi·ªán t·∫°i</th>
                                <th>C·∫£nh b√°o</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="categoryModalTitle">Th√™m lo·∫°i s·∫£n ph·∫©m</h3>
                <span class="close-modal" onclick="closeCategoryModal()">&times;</span>
            </div>
            <form id="categoryForm">
                <input type="hidden" id="categoryId">
                <div class="form-group"><label>M√£ lo·∫°i *</label><input type="text" id="categoryCode" class="form-control" required></div>
                <div class="form-group"><label>T√™n lo·∫°i *</label><input type="text" id="categoryName" class="form-control" required></div>
                <div class="form-group"><label>% L·ª£i nhu·∫≠n m·∫∑c ƒë·ªãnh *</label><input type="number" id="categoryProfit" class="form-control" min="0" max="100" required></div>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-danger" onclick="closeCategoryModal()">H·ªßy</button>
                    <button type="submit" class="btn btn-success">L∆∞u</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Th√™m s·∫£n ph·∫©m</h3>
                <span class="close-modal" onclick="closeProductModal()">&times;</span>
            </div>
            <form id="productForm">
                <input type="hidden" id="productId">
                <div class="form-group"><label>M√£ s·∫£n ph·∫©m *</label><input type="text" id="productCode" class="form-control" required></div>
                <div class="form-group"><label>T√™n s·∫£n ph·∫©m *</label><input type="text" id="productName" class="form-control" required></div>
                <div class="form-group"><label>Lo·∫°i s·∫£n ph·∫©m *</label><select id="productCategory" class="form-control" required><option value="">-- Ch·ªçn lo·∫°i --</option></select></div>
                <div class="form-group">
                    <label>H√¨nh ·∫£nh (URL)</label>
                    <input type="text" id="productImage" class="form-control" placeholder="ƒê∆∞·ªùng d·∫´n t∆∞∆°ng ƒë·ªëi">
                    <button type="button" class="btn btn-danger btn-sm mt-2" onclick="clearProductImage()">B·ªè h√¨nh</button>
                </div>
                <div class="form-group"><label>M√¥ t·∫£</label><textarea id="productDesc" class="form-control" rows="4"></textarea></div>
                <div class="form-group"><label>Hi·ªán tr·∫°ng (ƒëang b√°n/ng·ª´ng b√°n) *</label><select id="productStatus" class="form-control" required><option value="ƒêang b√°n">ƒêang b√°n</option><option value="Ng·ª´ng b√°n">Ng·ª´ng b√°n</option></select></div>

                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-danger" onclick="closeProductModal()">H·ªßy</button>
                    <button type="submit" class="btn btn-success">L∆∞u</button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="modal" id="importModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>T·∫°o phi·∫øu nh·∫≠p h√†ng</h3>
                <span class="close-modal" onclick="closeImportModal()">&times;</span>
            </div>
            <form id="importForm">
                <input type="hidden" id="importId">
                <div class="form-group"><label>Ng√†y nh·∫≠p *</label><input type="date" id="importDate" class="form-control" required></div>
                <h4>Chi ti·∫øt nh·∫≠p h√†ng</h4>
                <div id="importItems" style="max-height: 250px; overflow-y: auto; padding-right: 15px;"></div>
                <button type="button" class="btn btn-primary btn-sm mt-2" onclick="addImportItem()">‚ûï Th√™m s·∫£n ph·∫©m</button>
                <div style="margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 5px;">
                    <strong>T·ªïng ti·ªÅn (D·ª± ki·∫øn): <span id="importTotal">0</span> VNƒê</strong>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-danger" onclick="closeImportModal()">H·ªßy</button>
                    <button type="submit" class="btn btn-success" id="btn-save-import">L∆∞u phi·∫øu nh·∫≠p</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="orderModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Chi ti·∫øt ƒë∆°n h√†ng <span id="orderCodeDetail"></span></h3>
                <span class="close-modal" onclick="closeOrderModal()">&times;</span>
            </div>
            <div id="orderDetails"></div>
            <div style="margin-top: 20px; border-top: 1px solid #ddd; padding-top: 20px;">
                <label>C·∫≠p nh·∫≠t tr·∫°ng th√°i:</label>
                <select id="orderStatusUpdate" class="form-control" style="width: 50%; display: inline-block;">
                    <option value="Ch∆∞a x·ª≠ l√Ω">Ch∆∞a x·ª≠ l√Ω</option>
                    <option value="ƒê√£ x√°c nh·∫≠n">ƒê√£ x√°c nh·∫≠n</option>
                    <option value="ƒê√£ giao th√†nh c√¥ng">ƒê√£ giao th√†nh c√¥ng</option>
                    <option value="ƒê√£ h·ªßy">ƒê√£ h·ªßy</option>
                </select>
                <button class="btn btn-success" onclick="updateOrderStatus()">L∆∞u tr·∫°ng th√°i</button>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/product-detail.js"></script> 
    <script src="assets/js/admin_data_sync.js"></script> 
    <script src="assets/js/admin_login.js"></script>
</body>
</html>